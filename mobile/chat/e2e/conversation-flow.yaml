appId: dev.lazyconvex.chat
---
- runFlow: login.yaml

- assertVisible: "Chats"

- tapOn:
    text: "plus"
- waitForAnimationToEnd

- extendedWaitUntil:
    visible: "New Chat"
    timeout: 15000

- tapOn:
    text: "New Chat"
    index: 0
- waitForAnimationToEnd
- assertVisible: "Chat"
- assertVisible: "Message..."

- tapOn: "Message..."
- inputText: "Hello from Maestro"
- tapOn:
    id: "sendButton"
- waitForAnimationToEnd

- extendedWaitUntil:
    visible: "Hello from Maestro"
    timeout: 15000
- assertVisible: "Message..."

- tapOn: "Message..."
- inputText: "Tell me a short joke"
- tapOn:
    id: "sendButton"
- waitForAnimationToEnd

- extendedWaitUntil:
    visible: "Tell me a short joke"
    timeout: 15000
- assertVisible: "Hello from Maestro"
- assertVisible: "Message..."

- tapOn: "Message..."
- inputText: "One more message"
- tapOn:
    id: "sendButton"
- waitForAnimationToEnd

- extendedWaitUntil:
    visible: "One more message"
    timeout: 15000
- assertVisible: "Hello from Maestro"
- assertVisible: "Tell me a short joke"

- hideKeyboard
- back
- extendedWaitUntil:
    visible: "Chats"
    timeout: 10000
