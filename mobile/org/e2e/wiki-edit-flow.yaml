appId: dev.lazyconvex.org
---
- runFlow: onboarding-flow.yaml

- tapOn: "Wiki"
- waitForAnimationToEnd

- tapOn:
    text: "plus"
- waitForAnimationToEnd
- tapOn: "Page Title"
- inputText: "Editable Wiki"
- tapOn: "Slug (URL-friendly)"
- inputText: "editable-wiki"
- tapOn: "Create"
- waitForAnimationToEnd

- extendedWaitUntil:
    visible: "Editable Wiki"
    timeout: 10000
- tapOn: "Editable Wiki"
- waitForAnimationToEnd

- assertVisible: "Edit Wiki"
- assertVisible: "Details"
- assertVisible: "Title"
- assertVisible: "Slug"
- assertVisible: "Status"
- assertVisible: "Draft"
- assertVisible: "Content"

- tapOn:
    point: 540,560
- eraseText: 50
- inputText: "Renamed Wiki"
- extendedWaitUntil:
    visible: "Editing..."
    timeout: 5000
    optional: true
- extendedWaitUntil:
    visible: ".*Saving.*|.*Saved.*"
    timeout: 15000
    optional: true

- tapOn: "Draft"
- waitForAnimationToEnd
- tapOn: "Published"
- waitForAnimationToEnd
- extendedWaitUntil:
    visible: "Editing..."
    timeout: 5000
    optional: true
- extendedWaitUntil:
    visible: ".*Saving.*|.*Saved.*"
    timeout: 15000
    optional: true

- swipe:
    direction: UP
    duration: 500

- tapOn:
    point: 540,1400
- inputText: "Wiki content added by Maestro"
- extendedWaitUntil:
    visible: "Editing..."
    timeout: 5000
    optional: true
- extendedWaitUntil:
    visible: ".*Saving.*|.*Saved.*"
    timeout: 15000
    optional: true

- scrollUntilVisible:
    element: "Danger Zone"
    direction: DOWN
    timeout: 5000
- assertVisible: "Danger Zone"
- assertVisible: "Delete Page"

- tapOn: "Delete Page"
- waitForAnimationToEnd

- back
- waitForAnimationToEnd
