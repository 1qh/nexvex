name: ChatDesktop
options:
  bundleIdPrefix: dev.lazyconvex.desktop
  deploymentTarget:
    macOS: "14.0"
  xcodeVersion: "16.0"
packages:
  shared:
    path: ../shared
  swift-cross-ui:
    url: https://github.com/stackotter/swift-cross-ui.git
    branch: main
targets:
  Chat:
    type: application
    platform: macOS
    sources:
      - path: Sources
    dependencies:
      - package: shared
        product: DesktopShared
      - package: swift-cross-ui
        product: SwiftCrossUI
      - package: swift-cross-ui
        product: DefaultBackend
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: dev.lazyconvex.desktop.chat
        SWIFT_VERSION: "6.0"
        MACOSX_DEPLOYMENT_TARGET: "14.0"
        GENERATE_INFOPLIST_FILE: true
  ChatUITests:
    type: bundle.ui-testing
    platform: macOS
    sources:
      - path: UITests
    dependencies:
      - target: Chat
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: dev.lazyconvex.desktop.chat.uitests
        SWIFT_VERSION: "6.0"
        SWIFT_STRICT_CONCURRENCY: minimal
        GENERATE_INFOPLIST_FILE: true
schemes:
  Chat:
    build:
      targets:
        Chat: all
    run:
      config: Debug
    test:
      targets:
        - ChatUITests
  ChatUITests:
    build:
      targets:
        Chat: all
    test:
      targets:
        - ChatUITests
